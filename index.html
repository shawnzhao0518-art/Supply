<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Swisse运动营养智能评估报告</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: auto; padding: 20px; background: #f8f8f8; }
    h2 { color: #d32f2f; }
    label { display: block; margin-top: 15px; }
    input, select { width: 100%; max-width: 300px; padding: 5px; margin-top: 5px; }
    button { padding: 10px 20px; margin-top: 20px; background: #d32f2f; color: white; border: none; cursor: pointer; }
    .report { background: white; padding: 20px; margin-top: 30px; border-left: 5px solid #d32f2f; }
    .report h3 { color: #d32f2f; }
    ul { padding-left: 20px; }
    .section { margin-top: 20px; }
    .tag { display: inline-block; background: #eee; color: #555; padding: 4px 10px; border-radius: 6px; margin: 3px 3px 3px 0; font-size: 13px; }
  </style>
</head>
<body>

<h2>Swisse 个性化营养评估问卷</h2>

<form id="quizForm">
  <label>年龄：<input type="number" name="age" required></label>
  <label>性别：
    <select name="gender">
      <option value="male">男</option>
      <option value="female">女</option>
    </select>
  </label>
  <label>身高（cm）：<input type="number" name="height" required></label>
  <label>体重（kg）：<input type="number" name="weight" required></label>

  <label>每周运动频率：
    <select name="exercise_freq">
      <option value="0">几乎不运动</option>
      <option value="1">1–2 次</option>
      <option value="3">3–4 次</option>
      <option value="5">每周 5 次以上</option>
    </select>
  </label>

  <label>运动强度：
    <select name="exercise_intensity">
      <option value="1">轻度（快走、伸展）</option>
      <option value="2">中度（慢跑、瑜伽）</option>
      <option value="3">高强度（力量训练、有氧搏击）</option>
    </select>
  </label>

  <label>您的当前目标：
    <select name="goal">
      <option value="bone">骨骼关节保护</option>
      <option value="weight">控制体重</option>
      <option value="growth">儿童/青少年成长</option>
      <option value="muscle">增肌恢复</option>
      <option value="aging">银发族抗衰老</option>
    </select>
  </label>

  <label>是否存在关节痛、骨密度下降？
    <select name="joint_pain">
      <option value="yes">是</option>
      <option value="no">否</option>
    </select>
  </label>

  <label>家族是否有骨质疏松、肥胖或心血管疾病史？
    <select name="family_history">
      <option value="yes">是</option>
      <option value="no">否</option>
    </select>
  </label>

  <label>饮食是否缺乏奶制品、绿叶蔬菜或蛋白质？
    <select name="diet_score">
      <option value="low">缺乏</option>
      <option value="medium">中等</option>
      <option value="high">摄入充足</option>
    </select>
  </label>

  <button type="submit">生成分析报告</button>
</form>

<div class="report" id="reportBox" style="display:none;">
  <h3>🧾 个性化营养评估报告</h3>
  <div class="section" id="summary"></div>
  <div class="section" id="scores"></div>
  <div class="section" id="recommendations"></div>
</div>

<script>
  document.getElementById("quizForm").onsubmit = function (e) {
    e.preventDefault();
    const f = e.target;

    // 1. 获取输入
    const age = parseInt(f.age.value);
    const height = parseFloat(f.height.value);
    const weight = parseFloat(f.weight.value);
    const bmi = weight / ((height / 100) ** 2);
    const gender = f.gender.value;
    const freq = parseInt(f.exercise_freq.value);
    const intensity = parseInt(f.exercise_intensity.value);
    const goal = f.goal.value;
    const jointPain = f.joint_pain.value === "yes";
    const familyHistory = f.family_history.value === "yes";
    const diet = f.diet_score.value;

    // 2. 初始化评分模型
    const score = { bone: 0, weight: 0, growth: 0, muscle: 0, aging: 0 };

    // 3. 打分逻辑
    if (age > 50) score.bone += 3, score.aging += 3;
    if (jointPain) score.bone += 3;
    if (familyHistory) {
      score.bone += 2;
      score.weight += 2;
      score.aging += 1;
    }
    if (diet === "low") score.bone += 2, score.growth += 2;
    if (goal === "bone") score.bone += 3;

    if (bmi >= 27) score.weight += 3;
    if (freq <= 1) score.weight += 2;
    if (intensity === 1) score.weight += 1;
    if (goal === "weight") score.weight += 3;

    if (age <= 18) score.growth += 4;
    if (freq >= 2) score.growth += 2;
    if (goal === "growth") score.growth += 3;

    if (freq >= 3) score.muscle += 2;
    if (intensity === 3) score.muscle += 3;
    if (goal === "muscle") score.muscle += 3;

    if (goal === "aging") score.aging += 3;

    // 4. 产品推荐库（Swisse专属）
    const products = [
      { name: "Swisse Calcium + Vitamin D", goal: "bone", threshold: 7, desc: "补充钙和维生素D，支持骨骼密度与吸收" },
      { name: "Swisse Glucosamine + Chondroitin", goal: "bone", threshold: 8, desc: "改善关节弹性，预防关节退化" },
      { name: "Swisse Metabolism + Thermogenesis", goal: "weight", threshold: 6, desc: "加快代谢、帮助脂肪代谢" },
      { name: "Swisse Chlorophyll", goal: "weight", threshold: 5, desc: "帮助肠道清洁，控制热量" },
      { name: "Swisse Kids Bone Health", goal: "growth", threshold: 5, desc: "儿童钙+VD营养支持成长" },
      { name: "Swisse Kids Multi + Immunity", goal: "growth", threshold: 5, desc: "儿童全面维生素，提升免疫力" },
      { name: "Swisse Protein Powder + Magnesium", goal: "muscle", threshold: 6, desc: "蛋白质+镁，支持运动后恢复" },
      { name: "Swisse CoQ10", goal: "aging", threshold: 6, desc: "辅酶Q10，延缓细胞老化、支持心脏健康" },
      { name: "Swisse Hair Skin Nails + Collagen", goal: "aging", threshold: 7, desc: "胶原蛋白支持皮肤弹性和修复" }
    ];

    const recommendations = products.filter(p => score[p.goal] >= p.threshold);

    // 5. 显示报告
    document.getElementById("summary").innerHTML = `
      <strong>基本信息：</strong><br>
      年龄：${age} 岁，性别：${gender === 'male' ? '男' : '女'}，BMI：${bmi.toFixed(1)}<br>
      运动频率：${freq} 次/周，强度：${intensity === 1 ? '轻度' : intensity === 2 ? '中度' : '高强度'}<br>
      当前目标：<span class="tag">${goal}</span>
    `;

    document.getElementById("scores").innerHTML = `
      <strong>各维度评估得分：</strong><br>
      🦴 骨健康：${score.bone} / 💪 增肌恢复：${score.muscle} / ⚖️ 控体重：${score.weight}<br>
      🧒 成长发育：${score.growth} / 🧓 抗衰老：${score.aging}
    `;

    if (recommendations.length > 0) {
      let html = `<strong>🎯 推荐产品（Swisse）：</strong><ul>`;
      recommendations.forEach(p => {
        html += `<li><strong>${p.name}</strong> - ${p.desc}</li>`;
      });
      html += `</ul>`;
      document.getElementById("recommendations").innerHTML = html;
    } else {
      document.getElementById("recommendations").innerHTML = `<strong>未发现适合的Swisse产品，请联系营养师进一步评估。</strong>`;
    }

    document.getElementById("reportBox").style.display = "block";
  };
</script>

</body>
</html>
